import { CodePanel } from '@/components/Code';

# Nixos
Vicinae is available as a Nix flake but can also be run without installing. You can use the binaries of the Nix package or enable the systemd service provided by the home-manager module.

## Run Vicinae without installing
You can test the app directly by using a nix shell

```bash
nix shell github:vicinaehq/vicinae
```

## Home Manager module

<Note>
If you donâ€™t want to compile Vicinae yourself, make sure to enable [Cachix](/nixos#cachix)
</Note>


```nix
# flake.nix
{
  inputs = {
    # ...
    vicinae.url = "github:vicinaehq/vicinae";
  };
  outputs =
    {
      nixpkgs,
      home-manager,
      vicinae,
      ...
    }:
    {
      homeConfigurations."..." = home-manager.lib.homeManagerConfiguration {
        pkgs = nixpkgs.legacyPackages."<system>"; # e.g. x86_64-linux
        modules = [ vicinae.homeManagerModules.default ];
      };
    };
}
```

```nix
# home.nix
{
  # ...

  services.vicinae = {
    enable = true; # default: false
    systemd = {
      enable = true; # default: false
      autoStart = true; # default: false
      environment = {
        USE_LAYER_SHELL = 1;
      };
    };
  };
}
```

## Cachix

<Note>
If you want to use the cache do not add `inputs.nixpkgs.follows = "nixpkgs";` to your flake! This will make the cache miss.
</Note>

The Vicinae flake is **not** built by Hydra, so it is not cached in cache.nixos.org, like the rest of Nixpkgs.
Instead of requiring you to build Vicinae every time it updates, we provide a Cachix cache that you can add to your Nix configuration.

```nix
extra-substituters = [ "https://vicinae.cachix.org" ];
extra-trusted-public-keys = [ "vicinae.cachix.org-1:1kDrfienkGHPYbkpNj1mWTr7Fm1+zcenzgTizIcI3oc=" ];
```

Alterntively you can use the vicinae package from nixpkgs which is build by Hydra,
but may be out of date:

```nix
{ pkgs, ... }:
{
  services.vicinae = {
    packages = pkgs.vicinae;
  };
}
```

## Configuring with Home Manager
You can configure Vicinae using Home Manager options. Here is an example configuration:
flake.nix:

```nix
 inputs.vicinae-extensions = {
   url = "github:vicinaehq/extensions";
   inputs.nixpkgs.follows = "nixpkgs";
 };

```

home.nix:
```nix
services.vicinae = {
  enable = true;
  systemd = {
    enable = true;
    autoStart = true; # default: false
    environment = {
      USE_LAYER_SHELL = 1;
    };
  };
  settings = {
    close_on_focus_loss = true;
    consider_preedit = true;
    pop_to_root_on_close = true;
    favicon_service = "twenty";
    search_files_in_root = true;
    font = {
      normal = {
        size = 12;
        normal = "Maple Nerd Font";
      };
    };
    theme = {
      light = {
        name = "vicinae-light";
        icon_theme = "default";
      };
      dark = {
        name = "vicinae-dark";
        icon_theme = "default";
      };
    };
    launcher_window = {
      opacity = 0.98;
    };
  };
  extensions = with inputs.vicinae-extensions.packages.${pkgs.stdenv.hostPlatform.system}; [
     bluetooth
     nix
     power-profile
    # Extension names can be found in the link below, it's just the folder names
  ];
};
```
[Extension names](https://github.com/vicinaehq/extensions/tree/main/extensions)

the `theme.name` option can be set to any of the themes that come with Vicinae or a custom theme you have installed. See [the Github](https://github.com/vicinaehq/vicinae/tree/main/extra/themes) for more information on default theme names.
